<!doctype html>
<html lang="ja">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>街なかリノベ実践セミナー メンターナビ</title>
<style>
  body { font-family: system-ui, -apple-system, Segoe UI, Roboto, sans-serif; margin:0; background:#f5f7fb; color:#0b1a3a; }
  header { padding:24px 16px; text-align:center; font-weight:800; font-size:clamp(20px,4vw,40px); }
  main { max-width:900px; margin:0 auto; padding:16px; }
  textarea { width:100%; min-height:140px; border-radius:12px; border:1px solid #cfd6ea; padding:12px; font-size:16px; }
  button { border:0; border-radius:12px; padding:12px 18px; background:#0b5cff; color:#fff; font-weight:700; margin-top:12px; cursor:pointer; }
  .response { background:#fff; border:1px solid #e2e8f0; border-radius:12px; margin-top:16px; padding:14px; min-height:42px; }
  small { color:#475569; }
</style>
</head>
<body>
  <header>🧭 街なかリノベーション実践セミナー<br>メンターナビ</header>
  <main>
    <p><small>質問を入力してください（例：「事業計画の作り方を教えて」）</small></p>
    <textarea id="userInput" placeholder="ここに質問を入力…"></textarea>
    <button onclick="sendMessage()">送信</button>
    <div id="response" class="response"></div>
  </main>

<script>
  // ナビさんの人格（必要なら文言を好きに変えてOK）
  const PERSONA = `
あなたは「街なかリノベーション実践セミナー」の公式AIメンター“ナビさん”です。
やさしく、分かりやすく、最後に「次の一手」を2〜3個だけ提案します。`;

  async function sendMessage() {
    const input = document.getElementById("userInput").value.trim();
    const box = document.getElementById("response");
    if (!input) return;
    box.textContent = "💬 回答中です…";

    try {
      const res = await fetch("/api/chat", {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify({ system: PERSONA, user: input })
      });
      const data = await res.json();
      box.innerHTML = (data.reply || "返答が取得できませんでした").replace(/\n/g,"<br>");
      // 読み上げ（対応ブラウザのみ）
      if ('speechSynthesis' in window) {
        const u = new SpeechSynthesisUtterance(box.textContent);
        speechSynthesis.cancel(); speechSynthesis.speak(u);
      }
    } catch (e) {
      box.textContent = "⚠️ 通信エラー：" + e.message;
    }
  }
</script>
</body>
</html>
